{% extends 'analytics/base.html' %}

{% block dashboard_heading %}
    <header class="d-flex">
        <span>Welcome {{ request.user }}</span>
        <span class="ml-auto font-weight-bold">Welcome</span>
    </header>
{% endblock %}

{% block dashboard_body %}
    <div class="d-flex flex-column">
        <h2 class="mx-auto" style="margin-top: 10%">Set up your Funnel, Name </h2>
        <div class="d-flex justify-content-center">
            <a href="#" class="btn btn-primary mr-1">Work with an expert</a>
            <a href="#" class="btn btn-primary ml-1">Learn how to set it up</a>
        </div>
    </div>
{% endblock %}

{% block head_xtra_js %}
    {% comment %}
    <script>//working...
    "use strict";

    //Construct the script tag at Runtime
    function requestServerCall(url) {
        var head = document.head;
        var script = document.createElement("script");
        script.setAttribute("src", url);
        head.appendChild(script);
        head.removeChild(script);
    }

    //Send Request to Server
    requestServerCall("https://actstylo.ngrok.io/traffic/?callback=jsonpCallback&message=WTFWTF");
    </script>{% endcomment %}
    <script>
        function createCORSRequest(method, url) {
            var xhr = new XMLHttpRequest();
            if ("withCredentials" in xhr) {
                console.log("with cred");
                // XHR for Chrome/Firefox/Opera/Safari.
                xhr.open(method, url, true);
            } else if (typeof XDomainRequest != "undefined") {
                console.log("IE");
                // XDomainRequest for IE.
                xhr = new XDomainRequest();
                xhr.open(method, url);
            } else {
                console.log("cors not supported");
                // CORS not supported.
                xhr = null;
            }
            return xhr;
        }

        // Make the actual CORS request.
        function makeCorsRequest() {
            // This is a sample server that supports CORS.
            var url = 'https://actstylo.ngrok.io/traffic/?website=something-sssssss';

            var xhr = createCORSRequest('GET', url);
            if (!xhr) {
                alert('CORS not supported');
                return;
            }

            // Response handlers.
            xhr.onload = function () {
                alert('Response from CORS request to ' + url + ': title');
            };

            xhr.onerror = function () {
                alert('Whoops, there was an error making the request.');
            };

            xhr.send();
        }
        makeCorsRequest();
    </script>
{% endblock %}